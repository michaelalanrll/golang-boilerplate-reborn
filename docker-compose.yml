version: '3.0'
services:
  golang:
    build:
      context: ./docker-configuration
      dockerfile: go-docker
    container_name: golang_example
    ports:
      # <Port exposed> : < Port running inside container>
      - 8021:3000
    volumes:
      - './src:/go/src/example_app:rw'
    tty: true
  mysql:
    build:
      context: ./docker-configuration
      dockerfile: mysql-docker
    ports:
      - "3306:3306"
    environment:
      MYSQL_USER: demo
      MYSQL_PASSWORD: demo
      MYSQL_ROOT_PASSWORD: 1234567890
      MYSQL_DATABASE: go_workshop
    # sync folders. MySQL data is stored outside container so that rebuilding doesn't clear db.
    # folder is at workspace root.
    volumes:
      - ./db/:/var/lib/mysql